<!--  <div *ngFor="let tm of (userContext.teams$ | async)">
              {{tm | json}}
            </div> -->

<h3>
   Players
</h3>

<!-- <mat-card class="example-result-card" *ngIf='playerList'>
  <mat-card-content>
        <section>
          <mat-slide-toggle
              class="example-margin"
              [color]="primary"
              [checked]="false"
              [disabled]="!_isAdmin()"
              [(ngModel)]="draftMode">
            Draft Mode (Admin only) {{draftMode}}
          </mat-slide-toggle>
        </section>
  </mat-card-content>
</mat-card> -->


<!--  <mat-select [(ngModel)]="draftTeam">
   <mat-option *ngFor="let tm of (formData | async) " [value]="tm">{{tm.nickname}}</mat-option>   
   
 </mat-select>

{{draftTeam | json}}

  <button mdbBtn type="button" color="primary" mdbWavesEffect (click)="_addSelectedToTeam()" *ngIf="draftMode">
          <mdb-icon fas icon="user-plus"></mdb-icon>
        </button>
  <button mdbBtn type="button" color="primary" mdbWavesEffect (click)="_updateSelectionsWithOverride(draftTeam.nickname)" *ngIf="draftMode">
          Update selections for team
        </button>

  <button mdbBtn type="button" color="primary" mdbWavesEffect (click)="takenPlayers(!showTaken)" *ngIf="draftMode">
          Show Taken
        </button> -->



<div class="btn-group shadow-0" role="group">
  <button type="button" class="btn btn-link" data-mdb-color="dark" (click)="showPlayers = 'Available'; updateTakenPlayers('available')">Available</button>
  <button type="button" class="btn btn-link" data-mdb-color="dark" (click)="showPlayers = 'Taken'; updateTakenPlayers('taken')">Taken</button>
  <button type="button" class="btn btn-link" data-mdb-color="dark" (click)="showPlayers = 'All'; updateTakenPlayers('all')">All</button>
</div>




<table datatable 
       [dtOptions]="dtOptions" 
       [dtTrigger]="dtTrigger"
       class="row-border hover table-responsive">
  <thead>
    <tr>
    <th>Player Name</th>
    <th>MLB Id</th>
    <th>ABL Team</th>
    <th>Position</th>
    <th>Team</th>
    <th>Status</th>
    <th>ABL Runs</th>
     <th>G</th>
     <th>AB</th>
     <th>H</th>
     <th>2B</th>
     <th>3B</th>
     <th>HR</th>
     <th>BB + IBB</th>
     <th>HBP</th>
     <th>SB</th>
     <th>CS</th>
      <th>Action</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let player of filteredPlayers">
      <td>{{player.name}}</td>
      <td>{{player.mlbID}}</td>
      <td>{{player.ablstatus?.ablTeam ? player.ablstatus.ablTeam.nickname : ''}}</td>
      <td>{{player.position}}</td>
      <td>{{player.team}}</td>
      <td>{{player.status}}</td>
      <td> {{abl(player.stats.batting) | number }} </td>
      <td> {{player.stats.batting.gamesPlayed}}</td>
      <td> {{player.stats.batting.atBats }}</td>
      <td>{{player.stats.batting.hits}}</td>
      <td> {{player.stats.batting.doubles}} </td>
      <td>{{player.stats.batting.triples}}</td>
      <td>{{player.stats.batting.homeRuns}}</td>
      <td>{{player.stats.batting.baseOnBalls + player.stats.batting.intentionalWalks}}</td>
      <td>{{player.stats.batting.hitByPitch}}</td>
      <td> {{player.stats.batting.stolenBases}}</td>
      <td>{{player.stats.batting.caughtStealing}}</td>
      <td>
        
        <button mdbBtn type="button" color="primary" mdbWavesEffect (click)="_addPlayerToTeam(player)" *ngIf="!player.ablstatus?.ablTeam && !draftMode">
          <mdb-icon fas icon="user-plus"></mdb-icon>
        </button>
        <mat-checkbox
            class="example-margin"
            [(ngModel)]="player.draftMe"
            *ngIf="draftMode">
          Include in draft
        </mat-checkbox>
        
      </td>
    </tr>
  </tbody>
</table>



  <!-- Error loading events -->
  <p *ngIf="error" class="alert alert-danger">
    <strong>Oops!</strong> There was an error retrieving player data.
  </p>